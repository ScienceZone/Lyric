webpackJsonp([2,0],{0:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(24),o=a(r),i=n(22),s=a(i),l=n(14),c=a(l),u=n(111),d=a(u),f=n(77),m=a(f);n(70);var p=n(64),v=a(p),g=n(36),h=a(g);n(160),n(73),c.default.use(m.default),c.default.component("autocomplete-singer-name",{functional:!0,render:function(e,t){var n=t.props.item;return e("li",t.data,[e("div",{attrs:{class:"songName"}},[h.default.htmldecode(n.songname)]),e("span",{attrs:{class:"singerName"}},[h.default.htmldecode(n.singer.map(function(e){return e.name}).join(" / "))])])},props:{item:{type:Object,required:!0}}}),new c.default({el:"#app",beforeCreate:function(){window.NProgress.start(),window.device.windows()&&document.body.parentElement.classList.add("windows")},mounted:function(){var e=this;return(0,s.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.sleep(300);case 2:window.NProgress.done();case 3:case"end":return e.stop()}},t,e)}))()},render:function(e){return e(d.default)}})},36:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),o=a(r),i=n(22),s=a(i),l=n(23),c=a(l),u=n(37),d=a(u),f=n(162),m=a(f),p=function(){function e(){(0,c.default)(this,e)}return(0,d.default)(e,null,[{key:"getMyLikeSongs",value:function(){function t(){return n.apply(this,arguments)}var n=(0,s.default)(o.default.mark(function t(){var n,a,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2275334621,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n="QQMusicAPI.getMyLikeSongs",l<=0&&e.$cache.remove(n),a=e.$cache.get(n),!a){t.next=5;break}return t.abrupt("return",a);case 5:return t.next=7,(0,m.default)({url:"//c.y.qq.com/qzone/fcg-bin/fcg_ucc_getcdinfo_byids_cp.fcg",data:{disstid:c,song_begin:s,song_num:i,outCharset:"utf-8",type:u}});case 7:return r=t.sent,a=r.cdlist[0].songlist,e.$cache.set(n,a,l),t.abrupt("return",a);case 11:case"end":return t.stop()}},t,this)}));return t}()},{key:"getHotKeyList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.default)({url:"//c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"search",value:function(){function t(){return n.apply(this,arguments)}var n=(0,s.default)(o.default.mark(function t(){var n,a,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n="QQMusicAPI.search."+i,c<=0&&e.$cache.remove(n),a=e.$cache.get(n),!a){t.next=5;break}return t.abrupt("return",a);case 5:return i=e.htmldecode(i),t.next=8,(0,m.default)({url:"//c.y.qq.com/soso/fcgi-bin/search_for_qq_cp",data:{w:i,p:s,n:l}});case 8:return r=t.sent,a=r.data.song.list,e.$cache.set(n,a,c),t.abrupt("return",a);case 12:case"end":return t.stop()}},t,this)}));return t}()},{key:"getPlayUrl",value:function(e){return"//ws.stream.qqmusic.qq.com/"+e+".m4a?fromtag=0"}},{key:"getSongPic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return"//y.gtimg.cn/music/photo_new/T002R"+t+"x"+t+"M000"+e+".jpg?max_age=2592000"}},{key:"getLyric",value:function(){function t(e){return n.apply(this,arguments)}var n=(0,s.default)(o.default.mark(function t(n){var a,r,i;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a="QQMusicAPI.getLyric."+n,r=e.$cache.get(a),!r){t.next=4;break}return t.abrupt("return",r);case 4:return t.next=6,(0,m.default)({url:"//wemcc.com/fmusic/api.php",data:{type:"qq",id:n},jsonpCallback:"callback"});case 6:return i=t.sent,r=i.lrc,e.$cache.set(a,r),t.abrupt("return",r);case 10:case"end":return t.stop()}},t,this)}));return t}()},{key:"getTextLyric",value:function(){function t(e){return n.apply(this,arguments)}var n=(0,s.default)(o.default.mark(function t(n){var a,r,i,s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l){t.next=2;break}return t.abrupt("return");case 2:if(a="QQMusicAPI.getTextLyric."+(l||n),r=e.$cache.get(a),!r){t.next=6;break}return t.abrupt("return",r);case 6:return t.next=8,(0,m.default)({url:"//c.y.qq.com/soso/fcgi-bin/search_cp",data:{w:n,t:7}});case 8:if(i=t.sent,s=i.data.lyric.list,!(s.length<=0)){t.next=12;break}return t.abrupt("return");case 12:return r=(s.find(function(e){return e.songid===l})||s[0]).content,r&&(r=e.htmldecode(r.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/<br\/*>/g,"\n").replace(/<strong class="keyword">(.+?)<\/strong>/g,function(e,t){return t}))),e.$cache.set(a,r,c),t.abrupt("return",r);case 16:case"end":return t.stop()}},t,this)}));return t}()},{key:"htmldecode",value:function(e){return e?e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)}):""}}]),e}();p.$cache=window.lscache,t.default=p},63:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(166),o=a(r),i=n(170),s=a(i),l=n(23),c=a(l),u=n(37),d=a(u),f=n(36),m=a(f),p=function(){function e(){(0,c.default)(this,e)}return(0,d.default)(e,null,[{key:"syncMeta",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{songName:"",singerName:"",albumName:"",byName:""};if((0,s.default)(t).map(function(e){return!e}).filter(function(e){return e===!1}).length<=0)return"";var n=(this.aplayer||{audio:{duration:0}}).audio,a=((0,o.default)(n.duration/60)||0).toString().padLeft(2,"0"),r=((0,o.default)(n.duration%60)||0).toString().padLeft(2,"0");return e.removeSpaces("[ti:"+m.default.htmldecode(t.songName||"")+"]\n      [ar:"+m.default.htmldecode(t.singerName||"")+"]\n      [al:"+(t.albumName||"")+"]\n      [by:"+(t.byName||"")+"]\n      [t_time:("+a+":"+r+")]\n      [offset:0]")+"\n\n"}},{key:"insertTimeTag",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"insert",n=this.$refs.textarea.$el.childNodes[0],a=this.lrc;if(a){var r=this.aplayer.audio,i=n.selectionStart,s=a.split("\n"),l=a.substr(0,i).split("\n").length-1,c=0;s.filter(function(e,t){return t<l}).map(function(e,t){return c+=e.length+1});var u={length:0};if("insert"!==t&&(s[l]=e.deleteTimeTag(s[l])),"remove"===t)this.lrc=s.join("\n");else{var d=(0,o.default)(r.currentTime/60).toString().padLeft(2,"0"),f=(0,o.default)(r.currentTime%60).toString().padLeft(2,"0"),m=(0,o.default)(r.currentTime%60%((0,o.default)(f)||1)*100).toString().padLeft(2,"0");u="["+d+":"+f+"."+m+"]","replace"===t&&(a=s.join("\n"));var p=a.substr(0,c)+u+a.substr(c);this.lrc=p.endsWith("\n")?p:p+"\n"}this.$nextTick(function(){n.selectionStart=n.selectionEnd=c+u.length+s[l].length+1,n.focus()})}}},{key:"analyzeMeta",value:function(t){var n={songName:null,singerName:null,albumName:null,byName:null},a=["songName","singerName","albumName","byName"];return t?(e.metaRegex.forEach(function(e,r){var o=new RegExp(e).exec(t);o&&a[r]&&(n[a[r]]=o[1])}),n):n}},{key:"deleteMeta",value:function(t){return t?(e.metaRegex.forEach(function(e){return t=t.replace(e,"")}),t.trim()):""}},{key:"deleteTimeTag",value:function(t){return t?t.replace(e.regex,""):""}},{key:"replaceTimeTag",value:function(t){e.insertTimeTag.call(t,"replace")}},{key:"removeTimeTag",value:function(t){e.insertTimeTag.call(t,"remove")}},{key:"removeSpaces",value:function(e){return e?e.toString().split("\n").map(function(e){return e.trim()}).join("\n"):""}}]),e}();p.regex=/\[(\d+):(\d+).(\d+)]/g,p.metaRegex=[/\[ti:(.*)]/g,/\[ar:(.*)]/g,/\[al:(.*)]/g,/\[by:(.*)]/g,/\[t_time:(.*)]/g,/\[offset:(.*)]/g],t.default=p},64:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),o=a(r),i=n(23),s=a(i),l=function e(){(0,s.default)(this,e)};l.sleep=function(e){return new o.default(function(t){return setTimeout(t,e)})},t.default=l},70:function(e,t){},71:function(e,t){},72:function(e,t){},73:function(e,t){},111:function(e,t,n){var a,r;n(71),a=n(163);var o=n(113);r=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(r=a=a.default),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,e.exports=a},112:function(e,t,n){var a,r;n(72),a=n(164);var o=n(114);r=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(r=a=a.default),"function"==typeof r&&(r=r.options),r.render=o.render,r.staticRenderFns=o.staticRenderFns,e.exports=a},113:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"container"},[t("el-row",[t("el-col",{attrs:{lg:{span:20,push:2}}},[t("el-alert",{attrs:{title:"什么是 LRC 歌词？",type:"info",description:"LRC 即 Lyric 的缩写，是一种歌词格式，包含时间轴和断句。以 .lrc 为扩展名的歌词文件可以用于播放歌曲时同步显示滚动歌词。",closable:!1,"show-icon":""}})])]),e._v(" "),e._v(" "),t("el-row",[t("el-col",{attrs:{lg:{span:20,push:2}}},[t("el-steps",{attrs:{active:e.step,"process-status":"process","finish-status":"success"}},[t("el-step",{attrs:{title:"载入音乐文件",description:"可以选择上传本地音乐文件或选择网络文件"}}),e._v(" "),t("el-step",{attrs:{title:"编辑歌词",description:"填写好以下信息跟着音乐编辑歌词"}}),e._v(" "),t("el-step",{attrs:{title:"预览歌词并下载",description:"编辑完毕后点击预览歌词查看效果，确认效果OK后点击下载歌词"}})])])]),e._v(" "),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{lg:{span:13,push:2}}},[t("el-form",{ref:"form",attrs:{"label-position":"right","label-width":"70px",model:e.formModel,rules:e.rules}},[t("el-form-item",{attrs:{label:"歌曲名",prop:"songName"}},[t("el-autocomplete",{directives:[{name:"model",rawName:"v-model",value:e.formModel.songName,expression:"formModel.songName"}],staticClass:"auto-complete-sugg",attrs:{placeholder:"请输入歌曲名","trigger-on-focus":!0,"fetch-suggestions":e.searchSuggest,"custom-item":"autocomplete-singer-name"},domProps:{value:e.formModel.songName},on:{input:[function(t){e.formModel.songName=t},e.syncMeta],select:e.selectHandler}})]),e._v(" "),t("el-form-item",{attrs:{label:"歌手名",prop:"singerName"}},[t("el-autocomplete",{directives:[{name:"model",rawName:"v-model",value:e.formModel.singerName,expression:"formModel.singerName"}],staticClass:"auto-complete-sugg",attrs:{placeholder:"请输入歌手名","trigger-on-focus":!0,"fetch-suggestions":e.searchSuggest,"custom-item":"autocomplete-singer-name"},domProps:{value:e.formModel.singerName},on:{input:[function(t){e.formModel.singerName=t},e.syncMeta],select:e.selectHandler}})]),e._v(" "),t("el-form-item",{attrs:{label:"专辑名"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.albumName,expression:"albumName"}],attrs:{placeholder:"请输入专辑名"},domProps:{value:e.albumName},on:{input:[function(t){e.albumName=t},e.syncMeta]}})]),e._v(" "),t("el-form-item",{attrs:{label:"编辑人"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.byName,expression:"byName"}],attrs:{placeholder:"请输入编辑人"},domProps:{value:e.byName},on:{input:[function(t){e.byName=t},e.syncMeta]}})]),e._v(" "),e._v(" "),t("lrc-editor",{attrs:{aplayer:e.aplayer,lyric:e.lyric,songName:e.formModel.songName,byName:e.byName,loadedMedia:e.loadedMedia,autocompleteLyric:e.autocompleteLyric},on:{bindMeta:e.bindMeta,previewCallback:e.previewLyric}}),e._v(" "),t("div",{staticClass:"button-group"},[t("el-tooltip",{staticClass:"lyric-download-confirm-tooltip",attrs:{content:"点击下载后会重置UI，请务必保存到本地",placement:"left"}},[t("a",{staticClass:"lyric-download-confirm",attrs:{href:"javascript:;"},on:{click:e.downloadConfirm}}),e._v(" "),t("a",{ref:"download",class:e.downloadButtonClass,attrs:{href:e.downloadUrl,download:e.downloadName,target:"_blank"}},[t("i",{staticClass:"el-icon--download1"}),e._v(" "),t("span",[e._v("下载歌词")])])])])])]),e._v(" "),e._v(" "),t("el-col",{attrs:{lg:{span:7,push:2}}},[t("div",{staticClass:"aplayer"}),e._v(" "),e._v(" "),t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.networkMedia,expression:"networkMedia"}],attrs:{placeholder:"请输入（音乐）网络地址或上传本地音乐文件"},domProps:{value:e.networkMedia},on:{blur:e.loadNetworkMedia,input:function(t){e.networkMedia=t}},nativeOn:{keyup:function(t){e._k(t.keyCode,"enter",13)||e.loadNetworkMedia(t)}}},[t("el-tooltip",{attrs:{content:"上传本地音乐文件",placement:"bottom"},slot:"append"},[t("label",{staticClass:"el-button el-button--default"},[t("i",{staticClass:"el-icon-upload2"}),e._v(" "),t("input",{attrs:{type:"file",accept:"audio/*"},on:{change:e.uploadMediaHandler}})])])])])])]),e._v(" "),e._v(" "),t("footer",{staticClass:"page-footer"},[t("div",{staticClass:"footer-content"},[t("h2",[e._v("Lyrics production tool")]),e._v(" "),t("a",{attrs:{href:"//github.com/u3u/Lyric/issues",target:"_blank"}},[e._v("反馈建议")]),e._v(" "),t("a",{attrs:{href:"//github.com/u3u/Lyric/blob/master/README.md",target:"_blank"}},[e._v("使用指南")]),e._v(" "),t("el-tooltip",{attrs:{content:"QQ音乐提供数据接口支持",placement:"top"}},[t("a",{attrs:{href:"//y.qq.com",target:"_blank"}},[e._v("QQ音乐")])]),e._v(" "),t("el-tooltip",{attrs:{content:"上传歌词赚积分",placement:"top"}},[t("a",{attrs:{href:"//music.163.com/#/store/gain/uplyric",target:"_blank"}},[e._v("网易云音乐")])])]),e._v(" "),t("div",{staticClass:"icon-groups"},[t("el-popover",{ref:"cqy",attrs:{placement:"top",trigger:"hover"}},[t("div",{staticClass:"cqy-popver"},[t("div",{staticClass:"qrcode-wrapper"},[t("img",{staticClass:"qrcode",attrs:{src:"//p1.bqimg.com/549484/c2fb59f5a15aaa8d.png"}}),e._v(" "),t("img",{staticClass:"qrcode-icon",attrs:{src:"//q4.qlogo.cn/g?b=qq&nk=485463145&s=100"}})]),e._v(" "),t("div",{staticClass:"cqy"},[t("img",{staticClass:"avatar",attrs:{src:"//q4.qlogo.cn/g?b=qq&nk=485463145&s=100"}}),e._v(" "),t("span",[e._v("扫一扫二维码，加我QQ。")])])])]),e._v(" "),t("a",{directives:[{name:"popover",rawName:"v-popover:cqy",arg:"cqy"}],staticClass:"el-icon--qq",attrs:{href:"javascript:;"}}),e._v(" "),e._v(" "),t("el-tooltip",{attrs:{content:"欢迎关注我的微博(๑>◡<๑)",placement:"top"}},[t("a",{staticClass:"el-icon--weibo",attrs:{href:"//www.weibo.com/u/5896727167",target:"_blank"}})]),e._v(" "),t("el-tooltip",{attrs:{content:"喜欢的话收藏一下仓库哟(⌯˃̶᷄ ꈊ˂̶᷄ ૢ)",placement:"top"}},[t("a",{staticClass:"el-icon--github",attrs:{href:"//github.com/u3u/Lyric",target:"_blank"}})])])])])},staticRenderFns:[]}},114:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"lrc-editor"},[t("div",{staticClass:"lrc-editor_toolbar"},[t("el-tooltip",{attrs:{content:"添加时间标签(F9)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"plus"},on:{click:e.add}})]),e._v(" "),t("el-tooltip",{attrs:{content:"替换当前时间标签(F10)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"-replace3"},on:{click:e.replace}})]),e._v(" "),t("el-tooltip",{attrs:{content:"移除当前时间标签(F11)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"minus"},on:{click:e.remove}})]),e._v(" "),t("el-tooltip",{attrs:{content:"删除所有时间标签(F12)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"delete2"},on:{click:e.del}})]),e._v(" "),t("el-tooltip",{attrs:{content:"撤销(CTRL+Z)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"-undo-copy"},on:{click:e.undo}})]),e._v(" "),t("el-tooltip",{attrs:{content:"恢复(CTRL+Y)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"-undo-copy el-icon-reversal"},on:{click:e.redo}})]),e._v(" "),t("el-tooltip",{attrs:{content:"预览歌词(CTRL+ALT+V)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"-preview"},on:{click:e.preview}})])]),e._v(" "),t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.lrc,expression:"lrc"}],ref:"textarea",attrs:{type:"textarea",autosize:{minRows:15,maxRows:15},placeholder:"请输入歌词文本"},domProps:{value:e.lrc},on:{input:[function(t){e.lrc=t},e.syncMeta]},nativeOn:{keyup:[function(t){120===t.keyCode&&e.add(t)},function(t){121===t.keyCode&&e.replace(t)},function(t){122===t.keyCode&&e.remove(t)},function(t){123===t.keyCode&&e.del(t)},function(t){90===t.keyCode&&t.ctrlKey&&e.undo(t)},function(t){89===t.keyCode&&t.ctrlKey&&e.redo(t)},function(t){86===t.keyCode&&t.ctrlKey&&t.altKey&&e.preview(t)}]}}),e._v(" "),t("div",{staticClass:"lrc-editor_status-bar"},[e.songName?t("span",[e._v("正在编辑歌曲 《"+e._s(e.songName)+"》 的歌词    编辑人: "+e._s(e.byName||"活雷锋"))]):t("span",[e._v("LRC Editor Version 1.0")]),e._v(" "),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.savetime,expression:"savetime"}],staticClass:"lrc-editor_timebar"},[t("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(e.savetime))])])])},staticRenderFns:[]}},160:function(e,t){"use strict";!function(){function e(){for(s.clearRect(0,0,c,u),i=[{x:0,y:.7*u+d},{x:0,y:.7*u-d}];i[1].x<c+d;)t(i[0],i[1])}function t(e,t){s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y);var a=t.x+(2*g()-.25)*d,r=n(t.y);s.lineTo(a,r),s.closePath(),m-=p/-50,s.fillStyle="#"+(127*v(m)+128<<16|127*v(m+p/3)+128<<8|127*v(m+p/3*2)+128).toString(16),s.fill(),i[0]=i[1],i[1]={x:a,y:r}}function n(e){var t=e+(2*g()-1.1)*d;return t>u||t<0?n(e):t}var a="\n  .evanyou {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    overflow: hidden;\n    z-index: -1;\n  }\n  @media (max-width: 768px) {\n    .evanyou { display: none; }\n  }\n  ",r=document.createElement("style");r.innerHTML=a,document.head.appendChild(r);var o=document.createElement("canvas");o.className="evanyou",document.body.appendChild(o);var i,s=o.getContext("2d"),l=window.devicePixelRatio,c=window.innerWidth,u=window.innerHeight,d=90,f=Math,m=0,p=2*f.PI,v=f.cos,g=f.random;o.width=c*l,o.height=u*l,s.scale(l,l),s.globalAlpha=.6,document.onclick=e,document.ontouchstart=e,window.onresize=function(t){o.width=window.innerWidth,o.height=window.innerHeight,e()},e()}()},161:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=a(r),i=n(37),s=a(i),l=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"copy",value:function(e){var t=document.body.scrollTop,n=document.createElement("textarea");n.style.opacity=0,n.style.position="absolute",n.style.top="-1px",n.style.left="-1px",n.style.zIndex=-1,n.style.width="1px",n.style.height="1px",n.style.margin=0,n.style.padding=0,document.body.appendChild(n),n.value=e,n.focus(),n.selectionStart=0,n.selectionEnd=n.value.length;var a=document.execCommand("copy");return document.body.scrollTop=t,a||console.warn("[Clipboard.copy]: copy failed"),n.remove(),a}}]),e}();t.default=l},162:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),o=a(r),i=n(169),s=a(i),l=n(22),c=a(l);t.default=function(){var e=(0,c.default)(o.default.mark(function e(){var t,n,a,r,i,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=l.url,u=void 0===c?null:c,d=l.method,f=void 0===d?"get":d,m=l.data,p=void 0===m?{}:m,v=l.contentType,g=void 0===v?"application/x-www-form-urlencoded":v,h=l.cookie,y=void 0!==h&&h,w=l.jsonp,b=void 0===w||w,N=l.jsonpCallback,x=void 0===N?"jsonpCallback":N;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="post"===f.toLowerCase(),b&&(t=!1),n={method:f,headers:{},mode:"no-cors"},y&&(n.credentials="include"),g&&(n.headers["Content-Type"]=g),t?n.body=p:(a=(0,s.default)(p),r=u.includes("?")?"&":"?",i=a.map(function(e){return e+"="+p[e]}).join("&"),i&&(u+=r+i)),!b){e.next=12;break}return e.next=9,window.fetchJsonp(u,{jsonpCallback:x}).then(function(e){return e.json()});case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,window.fetch(u,n).then(function(e){return e.json()});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},163:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(165),o=a(r),i=n(24),s=a(i),l=n(22),c=a(l),u=n(112),d=a(u),f=n(63),m=a(f),p=n(36),v=a(p),g=n(64),h=a(g),y=n(161),w=a(y);t.default={name:"app",data:function(){return{formModel:{songName:null,singerName:null},rules:{songName:[{required:!0,message:"请输入歌曲名称"}],singerName:[{required:!0,message:"请输入歌手名称，多个歌手之间用 / 或 & 隔开"}]},albumName:null,byName:null,lyric:null,autocompleteLyric:null,aplayer:null,step:0,loadedMedia:!1,downloadUrl:"javascript:;",uploadMedia:null,networkMedia:null}},methods:{bindMeta:function(e){this.formModel.songName=e.songName,this.formModel.singerName=e.singerName,this.albumName=e.albumName,this.byName=e.byName,this.downloadUrl=e.lrc&&this.formModel.songName&&this.formModel.singerName?"data:text/plain;base64,"+window.base64.encode(e.lrc):"javascript:;",this.formModel.songName&&this.formModel.singerName&&e.lrc&&this.loadedMedia?this.step=2:this.step=this.loadedMedia?1:0},syncMeta:function(){this.$nextTick(function(){this.lyric=m.default.syncMeta.call(this,{songName:this.formModel.songName,singerName:this.formModel.singerName,albumName:this.albumName,byName:this.byName})||""})},previewLyric:function(e){if(!e)return void this.$message();var t=this.aplayer.music;t.lrc=e,this.createAplayer(t,!0,1),this.step=3},downloadConfirm:function(e){var t=this;return(0,c.default)(s.default.mark(function n(){var a,r,o,i,l,c,u;return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("javascript:;"!==t.downloadUrl){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.$confirm("点击下载后会将工作区重置到初始状态以便编辑新歌词，请务必保存到本地（为了避免误操作歌词会复制到剪切板）","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnPressEscape:!0});case 4:if(a=n.sent,"confirm"===a){n.next=7;break}return n.abrupt("return");case 7:if(r=window.navigator.userAgent.toLowerCase(),o=r.includes("safari")&&!r.includes("chrome"),i=window.device.ios(),l=t.downloadUrl.substr(t.downloadUrl.indexOf(",")+1),c=window.base64.decode(l).replace(/\n/g,"\r\n"),u=w.default.copy(c),!o&&!i){n.next=19;break}return u&&t.$message({type:"warning",message:"您的浏览器不支持直接下载，已成功将歌词复制到剪切板",duration:8e3,showClose:!0,onClose:function(){return t.initUI()}}),e.preventDefault(),n.abrupt("return",!1);case 19:u&&t.$notify({type:"success",message:"已成功将歌词复制到剪切板",onClose:function(){return t.initUI(!0)}});case 20:t.$refs.download.click();case 21:case"end":return n.stop()}},n,t)}))()},initUI:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.default)(s.default.mark(function n(){var a,r,i,l,c,u,d,f,m,p;return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.$loading({fullscreen:!0}),n.next=3,v.default.getMyLikeSongs();case 3:r=n.sent,i=[],l=!0,c=!1,u=void 0,n.prev=8,d=(0,o.default)(r);case 10:if(l=(f=d.next()).done){n.next=20;break}return m=f.value,n.next=14,v.default.getLyric(m.songmid);case 14:p=n.sent,p=p.replace(/\[/g,"\n[").trim(),i.push({title:m.songname,author:m.singer.map(function(e){return e.name}).join(" / "),url:v.default.getPlayUrl(m.songid),pic:v.default.getSongPic(m.albummid),lrc:p});case 17:l=!0,n.next=10;break;case 20:n.next=26;break;case 22:n.prev=22,n.t0=n.catch(8),c=!0,u=n.t0;case 26:n.prev=26,n.prev=27,!l&&d.return&&d.return();case 29:if(n.prev=29,!c){n.next=32;break}throw u;case 32:return n.finish(29);case 33:return n.finish(26);case 34:return e.createAplayer(i,!0,1),e.step=0,t&&(e.formModel.songName=null,e.formModel.singerName=null,e.albumName=null,e.byName=null,e.lyric=null,e.networkMedia=null,e.downloadUrl="javascript:;",e.$nextTick(function(){this.$refs.form.resetFields()})),n.next=39,h.default.sleep(300);case 39:a.close();case 40:case"end":return n.stop()}},n,e,[[8,22,26,34],[27,,29,33]])}))()},createAplayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"random",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"metadata";return(0,c.default)(s.default.mark(function i(){var l,c,u;return s.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t&&window.NProgress.start(),l=document.querySelector(".aplayer"),c=document.createElement("div"),c.className="aplayer",l.parentElement.insertBefore(c,l),l.remove(),u=function(){"length"in e&&(a.aplayer.element.querySelector(".aplayer-list").scrollTop=a.aplayer.element.querySelector(".aplayer-list .aplayer-list-light").offsetTop-a.aplayer.element.querySelector(".aplayer-list").offsetTop)},a.aplayer=new window.APlayer({element:c,autoplay:t,mode:r,preload:o,showlrc:n,music:e,listmaxheight:"115px"}),"length"in e&&(a.aplayer.element.querySelector(".aplayer-icon-menu").click(),u()),a.aplayer.on("canplay",function(){window.NProgress.done(),0===n&&(a.step=1,a.syncMeta(),a.loadedMedia=!0,a.$message("音频文件已载入"))}),a.aplayer.on("play",u),a.aplayer.audio.addEventListener("error",function(){a.$message({type:"error",message:"加载音频文件失败"}),window.NProgress.done()}),i.abrupt("return",a.aplayer);case 13:case"end":return i.stop()}},i,a)}))()},searchSuggest:function(e,t){var n=this;return(0,c.default)(s.default.mark(function a(){var r,o,i,l,c;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n.formModel.songName&&n.formModel.singerName,o=(window.event||{currentTarget:null}).currentTarget,i=(o||{value:null}).value,l=document.querySelectorAll(".el-autocomplete__suggestions").length,1===l&&e===i&&(l=0),e&&!(r&&l>0)){a.next=8;break}return t([]),a.abrupt("return");case 8:return n.formModel.songName&&n.formModel.singerName&&(e=n.formModel.songName.trim()+" - "+n.formModel.singerName.trim()),a.next=11,v.default.search(e);case 11:c=a.sent,t(c);case 13:case"end":return a.stop()}},a,n)}))()},selectHandler:function(e){var t=this;return(0,c.default)(s.default.mark(function n(){var a;return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.formModel.songName=e.songname,t.formModel.singerName=e.singer.map(function(e){return e.name}).join(" / "),t.albumName=null,n.next=5,v.default.getTextLyric(e.songname,e.songid);case 5:a=n.sent,t.autocompleteLyric=m.default.removeSpaces(a),t.createAplayer({title:t.formModel.songName,author:t.formModel.singerName,url:v.default.getPlayUrl(e.songid),pic:v.default.getSongPic(e.albummid)},!0,0,"loop");case 8:case"end":return n.stop()}},n,t)}))()},loadNetworkMedia:function(){this.networkMedia.trim()&&this.networkMedia!==this.aplayer.audio.src&&(this.formModel.songName="未知歌曲",this.formModel.singerName="未知歌手",this.createAplayer({url:this.networkMedia,title:this.formModel.songName,author:this.formModel.singerName},!0,0))},uploadMediaHandler:function(e){var t=this,n=e.target.files[0];if(e.target.value=null,!n.type.startsWith("audio/"))return void this.$message({type:"error",message:"文件格式不支持，请上传音频文件"});if(n.size<=0)return void this.$message({type:"error",message:"读取文件大小失败"});var a=this.$loading({fullscreen:!0}),r=/(.+)\s*-\s*(.+)(\..+)/.exec(n.name);r?(this.formModel.singerName=r[1],this.formModel.songName=r[2]):(this.formModel.songName=n.name.substr(0,n.name.lastIndexOf("."))||"未知歌曲",this.formModel.singerName="未知歌手");var o=new window.FileReader;o.onload=function(e){var n=t.uplaodMedia=e.target.result;t.createAplayer({url:n,title:t.formModel.songName,author:t.formModel.singerName},!0,0),a.close()},o.readAsDataURL(n)}},created:function(){this.$nextTick(this.initUI)},computed:{downloadName:function(){if("javascript:;"!==this.downloadUrl)return this.formModel.singerName.replace(/\s*\/\s*/,"&")+" - "+this.formModel.songName+".lrc"},downloadButtonClass:function(){return{"el-button":!0,"el-button--primary":!0,"is-disabled":"javascript:;"===this.downloadUrl}}},components:{LrcEditor:d.default}}},164:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(167),o=a(r),i=n(63),s=a(i);t.default={name:"lrc-editor",props:{songName:String,byName:String,lyric:String,autocompleteLyric:String,loadedMedia:Boolean,aplayer:Object},data:function(){return{lrc:this.lyric,savetime:null}},methods:{add:function(){s.default.insertTimeTag.call(this)},remove:function(){s.default.removeTimeTag(this)},replace:function(){s.default.replaceTimeTag(this)},del:function(){this.lrc=s.default.deleteTimeTag(this.lrc)},undo:function(){this.$refs.textarea.$el.childNodes[0].focus(),document.execCommand("undo")},redo:function(){this.$refs.textarea.$el.childNodes[0].focus(),document.execCommand("redo")},preview:function(){var e=window.device.desktop();if(!this.loadedMedia)return void this.$message({type:"warning",message:e?"音乐文件未载入，可通过歌曲名称搜索QQ音乐曲库，使用网络地址，或本地上传的方式载入。":"请先载入音乐文件",duration:e?5e3:3e3,showClose:e});var t=new RegExp(s.default.regex);return this.lrc.match(t)?void this.$emit("previewCallback",this.lrc):void this.$message({type:"error",message:"歌词格式错误"})},syncMeta:function(e){"boolean"==typeof e&&e!==!0||this.saveWork(),this.$nextTick(function(){this.lrc&&(this.lrc=s.default.removeSpaces(this.lrc)),this.$emit("bindMeta",(0,o.default)({},s.default.analyzeMeta(this.lrc),{lrc:this.lrc}))})},saveWork:function(){var e=this,t=window.lscache.get("lrc-editor.textarea");if(this.lrc!==t){window.lscache.set("lrc-editor.textarea",this.lrc);var n=new Date;window.lscache.set("lrc-editor.textarea.savetime",n),this.savetime="保存于 "+window.Moment(n).fromNow(),setTimeout(function(){return e.savetime=null},3e3)}},recoveryWork:function(){this.lrc=window.lscache.get("lrc-editor.textarea"),this.syncMeta(!1);var e=window.lscache.get("lrc-editor.textarea.savetime");e&&(this.savetime="恢复于 "+window.Moment(e).fromNow()+" 的工作")}},watch:{lyric:function(){this.lrc=this.lyric?this.lyric+s.default.deleteMeta(this.lrc):null},autocompleteLyric:function(){if(this.autocompleteLyric){var e=s.default.deleteMeta(this.lrc);if(this.lyric){var t=this.lyric+this.autocompleteLyric;e&&(t+="\n\n以下是您的原文本：\n"+e),t&&(this.lrc=t)}}}},created:function(){this.recoveryWork()},mounted:function(){var e=this;setInterval(function(){return e.saveWork()},15e3),setInterval(function(){var t=window.lscache.get("lrc-editor.textarea.savetime");t&&(e.savetime="恢复于 "+window.Moment(t).fromNow()+" 的工作")},3e4)}}}});