webpackJsonp([2,0],{0:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=a(24),o=r(n),s=a(22),i=r(s),l=a(14),c=r(l),u=a(110),d=r(u),f=a(76),m=r(f);a(70);var p=a(64),v=r(p),g=a(36),h=r(g);c.default.use(m.default),c.default.component("autocomplete-singer-name",{functional:!0,render:function(e,t){var a=t.props.item;return e("li",t.data,[e("div",{attrs:{class:"songName"}},[h.default.htmldecode(a.songname)]),e("span",{attrs:{class:"singerName"}},[h.default.htmldecode(a.singer.map(function(e){return e.name}).join(" / "))])])},props:{item:{type:Object,required:!0}}}),new c.default({el:"#app",beforeCreate:function(){window.NProgress.start(),window.device.windows()&&document.body.parentElement.classList.add("windows")},mounted:function(){var e=this;return(0,i.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.sleep(300);case 2:window.NProgress.done();case 3:case"end":return e.stop()}},t,e)}))()},render:function(e){return e(d.default)}})},36:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(24),o=r(n),s=a(22),i=r(s),l=a(23),c=r(l),u=a(37),d=r(u),f=a(160),m=r(f),p=function(){function e(){(0,c.default)(this,e)}return(0,d.default)(e,null,[{key:"getMyLikeSongs",value:function(){function t(){return a.apply(this,arguments)}var a=(0,i.default)(o.default.mark(function t(){var a,r,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2275334621,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a="QQMusicAPI.getMyLikeSongs",l<=0&&e.$cache.remove(a),r=e.$cache.get(a),!r){t.next=5;break}return t.abrupt("return",r);case 5:return t.next=7,(0,m.default)({url:"https://c.y.qq.com/qzone/fcg-bin/fcg_ucc_getcdinfo_byids_cp.fcg",data:{disstid:c,song_begin:i,song_num:s,outCharset:"utf-8",type:u}});case 7:return n=t.sent,r=n.cdlist[0].songlist,e.$cache.set(a,r,l),t.abrupt("return",r);case 11:case"end":return t.stop()}},t,this)}));return t}()},{key:"getHotKeyList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.default)({url:"https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"search",value:function(){function t(){return a.apply(this,arguments)}var a=(0,i.default)(o.default.mark(function t(){var a,r,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a="QQMusicAPI.search."+s,c<=0&&e.$cache.remove(a),r=e.$cache.get(a),!r){t.next=5;break}return t.abrupt("return",r);case 5:return s=e.htmldecode(s),t.next=8,(0,m.default)({url:"https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp",data:{w:s,p:i,n:l}});case 8:return n=t.sent,r=n.data.song.list,e.$cache.set(a,r,c),t.abrupt("return",r);case 12:case"end":return t.stop()}},t,this)}));return t}()},{key:"getPlayUrl",value:function(e){return"http://ws.stream.qqmusic.qq.com/"+e+".m4a?fromtag=0"}},{key:"getSongPic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150;return"http://y.gtimg.cn/music/photo_new/T002R"+t+"x"+t+"M000"+e+".jpg?max_age=2592000"}},{key:"getLyric",value:function(){function t(e){return a.apply(this,arguments)}var a=(0,i.default)(o.default.mark(function t(a){var r,n,s;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r="QQMusicAPI.getLyric."+a,n=e.$cache.get(r),!n){t.next=4;break}return t.abrupt("return",n);case 4:return t.next=6,(0,m.default)({url:"http://wemcc.com/fmusic/api.php",data:{type:"qq",id:a},jsonpCallback:"callback"});case 6:return s=t.sent,n=s.lrc,e.$cache.set(r,n),t.abrupt("return",n);case 10:case"end":return t.stop()}},t,this)}));return t}()},{key:"getTextLyric",value:function(){function t(e){return a.apply(this,arguments)}var a=(0,i.default)(o.default.mark(function t(a){var r,n,s,i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l){t.next=2;break}return t.abrupt("return");case 2:if(r="QQMusicAPI.getTextLyric."+(l||a),n=e.$cache.get(r),!n){t.next=6;break}return t.abrupt("return",n);case 6:return t.next=8,(0,m.default)({url:"https://c.y.qq.com/soso/fcgi-bin/search_cp",data:{w:a,t:7}});case 8:if(s=t.sent,i=s.data.lyric.list,!(i.length<=0)){t.next=12;break}return t.abrupt("return");case 12:return n=(i.find(function(e){return e.songid===l})||i[0]).content,n&&(n=e.htmldecode(n.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/<br\/*>/g,"\n").replace(/<strong class="keyword">(.+?)<\/strong>/g,function(e,t){return t}))),e.$cache.set(r,n,c),t.abrupt("return",n);case 16:case"end":return t.stop()}},t,this)}));return t}()},{key:"htmldecode",value:function(e){return e?e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)}):""}}]),e}();p.$cache=window.lscache,t.default=p},63:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(164),o=r(n),s=a(168),i=r(s),l=a(23),c=r(l),u=a(37),d=r(u),f=a(36),m=r(f),p=function(){function e(){(0,c.default)(this,e)}return(0,d.default)(e,null,[{key:"syncMeta",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{songName:"",singerName:"",albumName:"",byName:""};if((0,i.default)(t).map(function(e){return!e}).filter(function(e){return e===!1}).length<=0)return"";var a=(this.aplayer||{audio:{duration:0}}).audio,r=((0,o.default)(a.duration/60)||0).toString().padLeft(2,"0"),n=((0,o.default)(a.duration%60)||0).toString().padLeft(2,"0");return e.removeSpaces("[ti:"+m.default.htmldecode(t.songName||"")+"]\n      [ar:"+m.default.htmldecode(t.singerName||"")+"]\n      [al:"+(t.albumName||"")+"]\n      [by:"+(t.byName||"")+"]\n      [t_time:("+r+":"+n+")]\n      [offset:0]")+"\n\n"}},{key:"insertTimeTag",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"insert",a=this.$refs.textarea.$el.childNodes[0],r=this.lrc;if(r){var n=this.aplayer.audio,s=a.selectionStart,i=r.split("\n"),l=r.substr(0,s).split("\n").length-1,c=0;i.filter(function(e,t){return t<l}).map(function(e,t){return c+=e.length+1});var u={length:0};if("insert"!==t&&(i[l]=e.deleteTimeTag(i[l])),"remove"===t)this.lrc=i.join("\n");else{var d=(0,o.default)(n.currentTime/60).toString().padLeft(2,"0"),f=(0,o.default)(n.currentTime%60).toString().padLeft(2,"0"),m=(0,o.default)(n.currentTime%60%((0,o.default)(f)||1)*100).toString().padLeft(2,"0");u="["+d+":"+f+"."+m+"]","replace"===t&&(r=i.join("\n"));var p=r.substr(0,c)+u+r.substr(c);this.lrc=p.endsWith("\n")?p:p+"\n"}this.$nextTick(function(){a.selectionStart=a.selectionEnd=c+u.length+i[l].length+1,a.focus()})}}},{key:"analyzeMeta",value:function(t){var a={songName:null,singerName:null,albumName:null,byName:null},r=["songName","singerName","albumName","byName"];return t?(e.metaRegex.forEach(function(e,n){var o=new RegExp(e).exec(t);o&&r[n]&&(a[r[n]]=o[1])}),a):a}},{key:"deleteMeta",value:function(t){return t?(e.metaRegex.forEach(function(e){return t=t.replace(e,"")}),t.trim()):""}},{key:"deleteTimeTag",value:function(t){return t?t.replace(e.regex,""):""}},{key:"replaceTimeTag",value:function(t){e.insertTimeTag.call(t,"replace")}},{key:"removeTimeTag",value:function(t){e.insertTimeTag.call(t,"remove")}},{key:"removeSpaces",value:function(e){return e?e.toString().split("\n").map(function(e){return e.trim()}).join("\n"):""}}]),e}();p.regex=/\[(\d+):(\d+).(\d+)]/g,p.metaRegex=[/\[ti:(.*)]/g,/\[ar:(.*)]/g,/\[al:(.*)]/g,/\[by:(.*)]/g,/\[t_time:(.*)]/g,/\[offset:(.*)]/g],t.default=p},64:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(65),o=r(n),s=a(23),i=r(s),l=function e(){(0,i.default)(this,e)};l.sleep=function(e){return new o.default(function(t){return setTimeout(t,e)})},t.default=l},70:function(e,t){},71:function(e,t){},72:function(e,t){},110:function(e,t,a){var r,n;a(71),r=a(161);var o=a(112);n=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(n=r=r.default),"function"==typeof n&&(n=n.options),n.render=o.render,n.staticRenderFns=o.staticRenderFns,e.exports=r},111:function(e,t,a){var r,n;a(72),r=a(162);var o=a(113);n=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(n=r=r.default),"function"==typeof n&&(n=n.options),n.render=o.render,n.staticRenderFns=o.staticRenderFns,e.exports=r},112:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"container"},[t("el-row",[t("el-col",{attrs:{lg:{span:20,push:2}}},[t("el-alert",{attrs:{title:"什么是 LRC 歌词？",type:"info",description:"LRC 即 Lyric 的缩写，是一种歌词格式，包含时间轴和断句。以 .lrc 为扩展名的歌词文件可以用于播放歌曲时同步显示滚动歌词。",closable:!1,"show-icon":""}})])]),e._v(" "),e._v(" "),t("el-row",[t("el-col",{attrs:{lg:{span:20,push:2}}},[t("el-steps",{attrs:{active:e.step,"process-status":"process","finish-status":"success"}},[t("el-step",{attrs:{title:"载入音乐文件",description:"可以选择上传本地音乐文件或选择网络文件"}}),e._v(" "),t("el-step",{attrs:{title:"编辑歌词",description:"填写好以下信息跟着音乐编辑歌词"}}),e._v(" "),t("el-step",{attrs:{title:"预览歌词并下载",description:"编辑完毕后点击预览歌词查看效果，确认效果OK后点击下载歌词"}})])])]),e._v(" "),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{lg:{span:13,push:2}}},[t("el-form",{ref:"form",attrs:{"label-position":"right","label-width":"70px",model:e.formModel,rules:e.rules}},[t("el-form-item",{attrs:{label:"歌曲名",prop:"songName"}},[t("el-autocomplete",{directives:[{name:"model",rawName:"v-model",value:e.formModel.songName,expression:"formModel.songName"}],staticClass:"auto-complete-sugg",attrs:{placeholder:"请输入歌曲名","trigger-on-focus":!0,"fetch-suggestions":e.searchSuggest,"custom-item":"autocomplete-singer-name"},domProps:{value:e.formModel.songName},on:{input:[function(t){e.formModel.songName=t},e.syncMeta],select:e.selectHandler}})]),e._v(" "),t("el-form-item",{attrs:{label:"歌手名",prop:"singerName"}},[t("el-autocomplete",{directives:[{name:"model",rawName:"v-model",value:e.formModel.singerName,expression:"formModel.singerName"}],staticClass:"auto-complete-sugg",attrs:{placeholder:"请输入歌手名","trigger-on-focus":!0,"fetch-suggestions":e.searchSuggest,"custom-item":"autocomplete-singer-name"},domProps:{value:e.formModel.singerName},on:{input:[function(t){e.formModel.singerName=t},e.syncMeta],select:e.selectHandler}})]),e._v(" "),t("el-form-item",{attrs:{label:"专辑名"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.albumName,expression:"albumName"}],attrs:{placeholder:"请输入专辑名"},domProps:{value:e.albumName},on:{input:[function(t){e.albumName=t},e.syncMeta]}})]),e._v(" "),t("el-form-item",{attrs:{label:"编辑人"}},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.byName,expression:"byName"}],attrs:{placeholder:"请输入编辑人"},domProps:{value:e.byName},on:{input:[function(t){e.byName=t},e.syncMeta]}})]),e._v(" "),e._v(" "),t("lrc-editor",{attrs:{aplayer:e.aplayer,lyric:e.lyric,songName:e.formModel.songName,byName:e.byName,loadedMedia:e.loadedMedia,autocompleteLyric:e.autocompleteLyric},on:{bindMeta:e.bindMeta,previewCallback:e.previewLyric}}),e._v(" "),t("div",{staticClass:"button-group"},[t("el-tooltip",{staticClass:"lyric-download-confirm-tooltip",attrs:{content:"点击下载后会重置UI，请务必保存到本地",placement:"left"}},[t("a",{staticClass:"lyric-download-confirm",attrs:{href:"javascript:;"},on:{click:e.downloadConfirm}}),e._v(" "),t("a",{ref:"download",class:e.downloadButtonClass,attrs:{href:e.downloadUrl,download:e.downloadName,target:"_blank"}},[t("i",{staticClass:"el-icon--download1"}),e._v(" "),t("span",[e._v("下载歌词")])])])])])]),e._v(" "),e._v(" "),t("el-col",{attrs:{lg:{span:7,push:2}}},[t("div",{staticClass:"aplayer"}),e._v(" "),e._v(" "),t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.networkMedia,expression:"networkMedia"}],attrs:{placeholder:"请输入（音乐）网络地址或上传本地音乐文件"},domProps:{value:e.networkMedia},on:{blur:e.loadNetworkMedia,input:function(t){e.networkMedia=t}},nativeOn:{keyup:function(t){e._k(t.keyCode,"enter",13)||e.loadNetworkMedia(t)}}},[t("el-tooltip",{attrs:{content:"上传本地音乐文件",placement:"bottom"},slot:"append"},[t("label",{staticClass:"el-button el-button--default"},[t("i",{staticClass:"el-icon-upload2"}),e._v(" "),t("input",{attrs:{type:"file",accept:"audio/*"},on:{change:e.uploadMediaHandler}})])])])])])]),e._v(" "),e._v(" "),t("footer",{staticClass:"page-footer"},[t("div",{staticClass:"footer-content"},[t("h2",[e._v("Lyrics production tool")]),e._v(" "),t("a",{attrs:{href:"https://github.com/u3u/Lyric/issues",target:"_blank"}},[e._v("反馈建议")]),e._v(" "),t("a",{attrs:{href:"https://github.com/u3u/Lyric/blob/master/README.md",target:"_blank"}},[e._v("使用指南")]),e._v(" "),t("el-tooltip",{attrs:{content:"QQ音乐提供数据接口支持",placement:"top"}},[t("a",{attrs:{href:"http://y.qq.com",target:"_blank"}},[e._v("QQ音乐")])]),e._v(" "),t("el-tooltip",{attrs:{content:"上传歌词赚积分",placement:"top"}},[t("a",{attrs:{href:"http://music.163.com/#/store/gain/uplyric",target:"_blank"}},[e._v("网易云音乐")])])]),e._v(" "),t("div",{staticClass:"icon-groups"},[t("el-popover",{ref:"cqy",attrs:{placement:"top",trigger:"hover"}},[t("div",{staticClass:"cqy-popver"},[t("div",{staticClass:"qrcode-wrapper"},[t("img",{staticClass:"qrcode",attrs:{src:"http://p1.bqimg.com/549484/c2fb59f5a15aaa8d.png"}}),e._v(" "),t("img",{staticClass:"qrcode-icon",attrs:{src:"http://q4.qlogo.cn/g?b=qq&nk=485463145&s=100"}})]),e._v(" "),t("div",{staticClass:"cqy"},[t("img",{staticClass:"avatar",attrs:{src:"http://q4.qlogo.cn/g?b=qq&nk=485463145&s=100"}}),e._v(" "),t("span",[e._v("扫一扫二维码，加我QQ。")])])])]),e._v(" "),t("a",{directives:[{name:"popover",rawName:"v-popover:cqy",arg:"cqy"}],staticClass:"el-icon--qq",attrs:{href:"javascript:;"}}),e._v(" "),e._v(" "),t("el-tooltip",{attrs:{content:"欢迎关注我的微博(๑>◡<๑)",placement:"top"}},[t("a",{staticClass:"el-icon--weibo",attrs:{href:"http://www.weibo.com/u/5896727167",target:"_blank"}})]),e._v(" "),t("el-tooltip",{attrs:{content:"喜欢的话收藏一下仓库哟(⌯˃̶᷄ ꈊ˂̶᷄ ૢ)",placement:"top"}},[t("a",{staticClass:"el-icon--github",attrs:{href:"https://github.com/u3u/Lyric",target:"_blank"}})])])])])},staticRenderFns:[]}},113:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"lrc-editor"},[t("div",{staticClass:"lrc-editor_toolbar"},[t("el-tooltip",{attrs:{content:"添加时间标签(F9)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"plus"},on:{click:e.add}})]),e._v(" "),t("el-tooltip",{attrs:{content:"替换当前时间标签(F10)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"-replace3"},on:{click:e.replace}})]),e._v(" "),t("el-tooltip",{attrs:{content:"移除当前时间标签(F11)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"minus"},on:{click:e.remove}})]),e._v(" "),t("el-tooltip",{attrs:{content:"删除所有时间标签(F12)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"delete2"},on:{click:e.del}})]),e._v(" "),t("el-tooltip",{attrs:{content:"撤销(CTRL+Z)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"-undo-copy"},on:{click:e.undo}})]),e._v(" "),t("el-tooltip",{attrs:{content:"恢复(CTRL+Y)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"-undo-copy el-icon-reversal"},on:{click:e.redo}})]),e._v(" "),t("el-tooltip",{attrs:{content:"预览歌词(CTRL+ALT+V)",placement:"top"}},[t("el-button",{attrs:{size:"small",icon:"-preview"},on:{click:e.preview}})])]),e._v(" "),t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.lrc,expression:"lrc"}],ref:"textarea",attrs:{type:"textarea",autosize:{minRows:15,maxRows:15},placeholder:"请输入歌词文本"},domProps:{value:e.lrc},on:{input:[function(t){e.lrc=t},e.syncMeta]},nativeOn:{keyup:[function(t){120===t.keyCode&&e.add(t)},function(t){121===t.keyCode&&e.replace(t)},function(t){122===t.keyCode&&e.remove(t)},function(t){123===t.keyCode&&e.del(t)},function(t){90===t.keyCode&&t.ctrlKey&&e.undo(t)},function(t){89===t.keyCode&&t.ctrlKey&&e.redo(t)},function(t){86===t.keyCode&&t.ctrlKey&&t.altKey&&e.preview(t)}]}}),e._v(" "),t("div",{staticClass:"lrc-editor_status-bar"},[e.songName?t("span",[e._v("正在编辑歌曲 《"+e._s(e.songName)+"》 的歌词    编辑人: "+e._s(e.byName||"活雷锋"))]):t("span",[e._v("LRC Editor Version 1.0")]),e._v(" "),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.savetime,expression:"savetime"}],staticClass:"lrc-editor_timebar"},[t("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(e.savetime))])])])},staticRenderFns:[]}},159:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(23),o=r(n),s=a(37),i=r(s),l=function(){function e(){(0,o.default)(this,e)}return(0,i.default)(e,null,[{key:"copy",value:function(e){var t=document.body.scrollTop,a=document.createElement("textarea");a.style.opacity=0,a.style.position="absolute",a.style.top="-1px",a.style.left="-1px",a.style.zIndex=-1,a.style.width="1px",a.style.height="1px",a.style.margin=0,a.style.padding=0,document.body.appendChild(a),a.value=e,a.focus(),a.selectionStart=0,a.selectionEnd=a.value.length;var r=document.execCommand("copy");return document.body.scrollTop=t,r||console.warn("[Clipboard.copy]: copy failed"),a.remove(),r}}]),e}();t.default=l},160:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(24),o=r(n),s=a(167),i=r(s),l=a(22),c=r(l);t.default=function(){var e=(0,c.default)(o.default.mark(function e(){var t,a,r,n,s,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=l.url,u=void 0===c?null:c,d=l.method,f=void 0===d?"get":d,m=l.data,p=void 0===m?{}:m,v=l.contentType,g=void 0===v?"application/x-www-form-urlencoded":v,h=l.cookie,y=void 0!==h&&h,w=l.jsonp,b=void 0===w||w,N=l.jsonpCallback,_=void 0===N?"jsonpCallback":N;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="post"===f.toLowerCase(),b&&(t=!1),a={method:f,headers:{},mode:"no-cors"},y&&(a.credentials="include"),g&&(a.headers["Content-Type"]=g),t?a.body=p:(r=(0,i.default)(p),n=u.includes("?")?"&":"?",s=r.map(function(e){return e+"="+p[e]}).join("&"),s&&(u+=n+s)),!b){e.next=12;break}return e.next=9,window.fetchJsonp(u,{jsonpCallback:_}).then(function(e){return e.json()});case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,window.fetch(u,a).then(function(e){return e.json()});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},161:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(163),o=r(n),s=a(24),i=r(s),l=a(22),c=r(l),u=a(111),d=r(u),f=a(63),m=r(f),p=a(36),v=r(p),g=a(64),h=r(g),y=a(159),w=r(y);t.default={name:"app",data:function(){return{formModel:{songName:null,singerName:null},rules:{songName:[{required:!0,message:"请输入歌曲名称"}],singerName:[{required:!0,message:"请输入歌手名称，多个歌手之间用 / 或 & 隔开"}]},albumName:null,byName:null,lyric:null,autocompleteLyric:null,aplayer:null,step:0,loadedMedia:!1,downloadUrl:"javascript:;",uploadMedia:null,networkMedia:null}},methods:{bindMeta:function(e){this.formModel.songName=e.songName,this.formModel.singerName=e.singerName,this.albumName=e.albumName,this.byName=e.byName,this.downloadUrl=e.lrc&&this.formModel.songName&&this.formModel.singerName?"data:text/plain;base64,"+window.base64.encode(e.lrc):"javascript:;",this.formModel.songName&&this.formModel.singerName&&e.lrc&&this.loadedMedia?this.step=2:this.step=this.loadedMedia?1:0},syncMeta:function(){this.$nextTick(function(){this.lyric=m.default.syncMeta.call(this,{songName:this.formModel.songName,singerName:this.formModel.singerName,albumName:this.albumName,byName:this.byName})||""})},previewLyric:function(e){if(!e)return void this.$message();var t=this.aplayer.music;t.lrc=e,this.createAplayer(t,!0,1),this.step=3},downloadConfirm:function(e){var t=this;return(0,c.default)(i.default.mark(function a(){var r,n,o,s,l,c,u;return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("javascript:;"!==t.downloadUrl){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,t.$confirm("点击下载后会将工作区重置到初始状态以便编辑新歌词，请务必保存到本地（为了避免误操作歌词会复制到剪切板）","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnPressEscape:!0});case 4:if(r=a.sent,"confirm"===r){a.next=7;break}return a.abrupt("return");case 7:if(n=window.navigator.userAgent.toLowerCase(),o=n.includes("safari")&&!n.includes("chrome"),s=window.device.ios(),l=t.downloadUrl.substr(t.downloadUrl.indexOf(",")+1),c=window.base64.decode(l).replace(/\n/g,"\r\n"),u=w.default.copy(c),!o&&!s){a.next=19;break}return u&&t.$message({type:"warning",message:"您的浏览器不支持直接下载，已成功将歌词复制到剪切板",duration:8e3,showClose:!0,onClose:function(){return t.initUI()}}),e.preventDefault(),a.abrupt("return",!1);case 19:u&&t.$notify({type:"success",message:"已成功将歌词复制到剪切板",onClose:function(){return t.initUI(!0)}});case 20:t.$refs.download.click();case 21:case"end":return a.stop()}},a,t)}))()},initUI:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.default)(i.default.mark(function a(){var r,n,s,l,c,u,d,f,m,p;return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.$loading({fullscreen:!0}),a.next=3,v.default.getMyLikeSongs();case 3:n=a.sent,s=[],l=!0,c=!1,u=void 0,a.prev=8,d=(0,o.default)(n);case 10:if(l=(f=d.next()).done){a.next=20;break}return m=f.value,a.next=14,v.default.getLyric(m.songmid);case 14:p=a.sent,p=p.replace(/\[/g,"\n[").trim(),s.push({title:m.songname,author:m.singer.map(function(e){return e.name}).join(" / "),url:v.default.getPlayUrl(m.songid),pic:v.default.getSongPic(m.albummid),lrc:p});case 17:l=!0,a.next=10;break;case 20:a.next=26;break;case 22:a.prev=22,a.t0=a.catch(8),c=!0,u=a.t0;case 26:a.prev=26,a.prev=27,!l&&d.return&&d.return();case 29:if(a.prev=29,!c){a.next=32;break}throw u;case 32:return a.finish(29);case 33:return a.finish(26);case 34:return e.createAplayer(s,!0,1),t&&(e.formModel.songName=null,e.formModel.singerName=null,e.albumName=null,e.byName=null,e.lyric=null,e.step=0,e.networkMedia=null,e.downloadUrl="javascript:;",e.$nextTick(function(){this.$refs.form.resetFields()})),a.next=38,h.default.sleep(300);case 38:r.close();case 39:case"end":return a.stop()}},a,e,[[8,22,26,34],[27,,29,33]])}))()},createAplayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"random",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"metadata";return(0,c.default)(i.default.mark(function s(){var l,c,u;return i.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t&&window.NProgress.start(),l=document.querySelector(".aplayer"),c=document.createElement("div"),c.className="aplayer",l.parentElement.insertBefore(c,l),l.remove(),u=function(){"length"in e&&(r.aplayer.element.querySelector(".aplayer-list").scrollTop=r.aplayer.element.querySelector(".aplayer-list .aplayer-list-light").offsetTop-r.aplayer.element.querySelector(".aplayer-list").offsetTop)},r.aplayer=new window.APlayer({element:c,autoplay:t,mode:n,preload:o,showlrc:a,music:e,listmaxheight:"115px"}),"length"in e&&(r.aplayer.element.querySelector(".aplayer-icon-menu").click(),u()),r.aplayer.on("canplay",function(){window.NProgress.done(),0===a&&(r.step=1,r.syncMeta(),r.loadedMedia=!0,r.$message("音频文件已载入"))}),r.aplayer.on("play",u),r.aplayer.on("error",function(e){r.$message({type:"error",message:e.toString()})}),s.abrupt("return",r.aplayer);case 13:case"end":return s.stop()}},s,r)}))()},searchSuggest:function(e,t){var a=this;return(0,c.default)(i.default.mark(function r(){var n,o,s,l,c;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=a.formModel.songName&&a.formModel.singerName,o=(window.event||{currentTarget:null}).currentTarget,s=(o||{value:null}).value,l=document.querySelectorAll(".el-autocomplete__suggestions").length,1===l&&e===s&&(l=0),e&&!(n&&l>0)){r.next=8;break}return t([]),r.abrupt("return");case 8:return a.formModel.songName&&a.formModel.singerName&&(e=a.formModel.songName.trim()+" - "+a.formModel.singerName.trim()),r.next=11,v.default.search(e);case 11:c=r.sent,t(c);case 13:case"end":return r.stop()}},r,a)}))()},selectHandler:function(e){var t=this;return(0,c.default)(i.default.mark(function a(){var r;return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.formModel.songName=e.songname,t.formModel.singerName=e.singer.map(function(e){return e.name}).join(" / "),t.albumName=null,a.next=5,v.default.getTextLyric(e.songname,e.songid);case 5:r=a.sent,t.autocompleteLyric=m.default.removeSpaces(r),t.createAplayer({title:t.formModel.songName,author:t.formModel.singerName,url:v.default.getPlayUrl(e.songid),pic:v.default.getSongPic(e.albummid)},!0,0,"loop");case 8:case"end":return a.stop()}},a,t)}))()},loadNetworkMedia:function(){this.networkMedia.trim()&&this.networkMedia!==this.aplayer.audio.src&&(this.formModel.songName="未知歌曲",this.formModel.singerName="未知歌手",this.createAplayer({url:this.networkMedia,title:this.formModel.songName,author:this.formModel.singerName},!0,0))},uploadMediaHandler:function(e){var t=this,a=e.target.files[0];if(e.target.value=null,!a.type.startsWith("audio/"))return void this.$message({type:"error",message:"文件格式不支持，请上传音频文件"});if(a.size<=0)return void this.$message({type:"error",message:"读取文件大小失败"});var r=this.$loading({fullscreen:!0}),n=/(.+)\s*-\s*(.+)(\..+)/.exec(a.name);n?(this.formModel.singerName=n[1],this.formModel.songName=n[2]):(this.formModel.songName=a.name.substr(0,a.name.lastIndexOf("."))||"未知歌曲",this.formModel.singerName="未知歌手");var o=new window.FileReader;o.onload=function(e){var a=t.uplaodMedia=e.target.result;t.createAplayer({url:a,title:t.formModel.songName,author:t.formModel.singerName},!0,0),r.close()},o.readAsDataURL(a)}},created:function(){this.$nextTick(this.initUI)},computed:{downloadName:function(){if("javascript:;"!==this.downloadUrl)return this.formModel.singerName.replace(/\s*\/\s*/,"&")+" - "+this.formModel.songName+".lrc"},downloadButtonClass:function(){return{"el-button":!0,"el-button--primary":!0,"is-disabled":"javascript:;"===this.downloadUrl}}},components:{LrcEditor:d.default}}},162:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(165),o=r(n),s=a(63),i=r(s);t.default={name:"lrc-editor",props:{songName:String,byName:String,lyric:String,autocompleteLyric:String,loadedMedia:Boolean,aplayer:Object},data:function(){return{lrc:this.lyric,savetime:null}},methods:{add:function(){i.default.insertTimeTag.call(this)},remove:function(){i.default.removeTimeTag(this)},replace:function(){i.default.replaceTimeTag(this)},del:function(){this.lrc=i.default.deleteTimeTag(this.lrc)},undo:function(){this.$refs.textarea.$el.childNodes[0].focus(),document.execCommand("undo")},redo:function(){this.$refs.textarea.$el.childNodes[0].focus(),document.execCommand("redo")},preview:function(){var e=window.device.desktop();if(!this.loadedMedia)return void this.$message({type:"warning",message:e?"音乐文件未载入，可通过歌曲名称搜索QQ音乐曲库，使用网络地址，或本地上传的方式载入。":"请先载入音乐文件",duration:e?5e3:3e3,showClose:e});var t=new RegExp(i.default.regex);return this.lrc.match(t)?void this.$emit("previewCallback",this.lrc):void this.$message({type:"error",message:"歌词格式错误"})},syncMeta:function(e){"boolean"==typeof e&&e!==!0||this.saveWork(),this.$nextTick(function(){this.lrc&&(this.lrc=i.default.removeSpaces(this.lrc)),this.$emit("bindMeta",(0,o.default)({},i.default.analyzeMeta(this.lrc),{lrc:this.lrc}))})},saveWork:function(){var e=this,t=window.lscache.get("lrc-editor.textarea");if(this.lrc!==t){window.lscache.set("lrc-editor.textarea",this.lrc);var a=new Date;window.lscache.set("lrc-editor.textarea.savetime",a),this.savetime="保存于 "+window.Moment(a).fromNow(),setTimeout(function(){return e.savetime=null},3e3)}},recoveryWork:function(){this.lrc=window.lscache.get("lrc-editor.textarea"),this.syncMeta(!1);var e=window.lscache.get("lrc-editor.textarea.savetime");e&&(this.savetime="恢复于 "+window.Moment(e).fromNow()+" 的工作")}},watch:{lyric:function(){this.lrc=this.lyric?this.lyric+i.default.deleteMeta(this.lrc):null},autocompleteLyric:function(){if(this.autocompleteLyric){var e=i.default.deleteMeta(this.lrc);if(this.lyric){var t=this.lyric+this.autocompleteLyric;e&&(t+="\n\n以下是您的原文本：\n"+e),t&&(this.lrc=t)}}}},created:function(){this.recoveryWork()},mounted:function(){var e=this;setInterval(function(){return e.saveWork()},15e3),setInterval(function(){var t=window.lscache.get("lrc-editor.textarea.savetime");t&&(e.savetime="恢复于 "+window.Moment(t).fromNow()+" 的工作")},3e4)}}}});